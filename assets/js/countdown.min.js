/*!jQuery Professional Countdown*/
/**
 * Simple COuntdown with callback and Time Zone Support
 *
 * Where applicable: Copyright (c) 2013 Luca Grandi
 * Under MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */
(function(b){function p(){var b=document.createElement("canvas");return!(!b.getContext||!b.getContext("2d"))}b.fn.countdown=function(g){function q(){"knob"==a.skin.toLowerCase()&&p()?(a.skin=a.skin.toLowerCase(),c.append('<input class="'+a.option.day.eClass+'" type="text" value="0" data-readonly="true" /><input class="'+a.option.hour.eClass+'" type="text" value="0" data-readonly="true" /><input class="'+a.option.minute.eClass+'" type="text" value="0" data-readonly="true" /><input class="'+a.option.second.eClass+ '" type="text" value="0" data-readonly="true" />'),a.option.day.eClass="."+a.option.day.eClass.split(" ").join("."),a.option.hour.eClass="."+a.option.hour.eClass.split(" ").join("."),a.option.minute.eClass="."+a.option.minute.eClass.split(" ").join("."),a.option.second.eClass="."+a.option.second.eClass.split(" ").join("."),a.option.day.max=Math.floor((e-k)/86400),a.option.day.draw=function(){b(this.i).val(this.cv)},a.option.hour.draw=function(){b(this.i).val(this.cv)},a.option.minute.draw=function(){b(this.i).val(this.cv)}, a.option.second.draw=function(){b(this.i).val(this.cv)},c.find(a.option.day.eClass).knob(a.option.day),c.find(a.option.hour.eClass).knob(a.option.hour),c.find(a.option.minute.eClass).knob(a.option.minute),c.find(a.option.second.eClass).knob(a.option.second)):("knob"!=a.skin.toLowerCase()||p()?c.html('<ul class="'+a.skin+'"><li><span class="'+a.option.day.eClass+'">00</span><p class="timeRefDays">Days</p></li><li><span class="'+a.option.hour.eClass+'">00</span><p class="timeRefHours">Hours</p></li><li><span class="'+ a.option.minute.eClass+'">00</span><p class="timeRefMinutes">Minutes</p></li><li><span class="'+a.option.second.eClass+'">00</span><p class="timeRefSeconds">Seconds</p></li></ul>'):(a.skin=a.fallbackSkin,c.append('<ul class="'+a.skin+'" ><li><span class="'+a.option.day.eClass+'">00</span><p class="timeRefDays">Days</p></li><li><span class="'+a.option.hour.eClass+'">00</span><p class="timeRefHours">Hours</p></li><li><span class="'+a.option.minute.eClass+'">00</span><p class="timeRefMinutes">Minutes</p></li><li><span class="'+ a.option.second.eClass+'">00</span><p class="timeRefSeconds">Seconds</p></li></ul>')),a.option.day.eClass="."+a.option.day.eClass.split(" ").join("."),a.option.hour.eClass="."+a.option.hour.eClass.split(" ").join("."),a.option.minute.eClass="."+a.option.minute.eClass.split(" ").join("."),a.option.second.eClass="."+a.option.second.eClass.split(" ").join("."));f=c.find(a.option.day.eClass);l=c.find(a.option.hour.eClass);m=c.find(a.option.minute.eClass);n=c.find(a.option.second.eClass)}function r(){currentDate= ((new Date).getTime()-a.offset)/1E3;e<currentDate?(clearInterval(d),d=null,seconds=minutes=hours=days=0,null!=a.callback&&a.callback.call(this)):(seconds=Math.floor(e-currentDate),days=Math.floor(seconds/86400),seconds-=86400*days,hours=Math.floor(seconds/3600),seconds-=3600*hours,minutes=Math.floor(seconds/60),seconds-=60*minutes,"knob"!=a.skin?(days=(a.format=2<=String(days).length)?days:"0"+days,hours=(a.format=2<=String(hours).length)?hours:"0"+hours,minutes=(a.format=2<=String(minutes).length)? minutes:"0"+minutes,seconds=(a.format=2<=String(seconds).length)?seconds:"0"+seconds,f.text(days),l.text(hours),m.text(minutes),n.text(seconds),1==days?f.parent().children(".timeRefDays").text("Day"):f.parent().children(".timeRefDays").text("Days"),1==hours?l.parent().children(".timeRefHours").text("Hour"):l.parent().children(".timeRefHours").text("Hours"),1==minutes?m.parent().children(".timeRefMinutes").text("Minute"):m.parent().children(".timeRefMinutes").text("Minutes"),1==seconds?n.parent().children(".timeRefSeconds").text("Second"): n.parent().children(".timeRefSeconds").text("Seconds")):(f.val(days).trigger("change"),l.val(hours).trigger("change"),m.val(minutes).trigger("change"),n.val(seconds).trigger("change")))}var a={skin:"countdown_default",fallbackSkin:"countdown_default",option:{day:{max:null,eClass:"days"},hour:{max:23,eClass:"hours"},minute:{max:59,eClass:"minutes"},second:{max:59,eClass:"seconds"}},dateStart:null,dateEnd:null,format:!0,callback:null,timezone:!1,offset:0};g&&b.extend(!0,a,g);"string"==typeof a.dateEnd&& (a.dateEnd=a.dateEnd.split(" "),a.dateEnd[0]=a.dateEnd[0].split("/"),a.dateEnd[1]=a.dateEnd[1].split(":"),a.dateEnd=a.dateEnd[0].concat(a.dateEnd[1]));null!=a.dateStart&&"string"==typeof a.dateStart&&(a.dateStart=a.dateStart.split(" "),a.dateStart[0]=a.dateStart[0].split("/"),a.dateStart[1]=a.dateStart[1].split(":"),a.dateStart=a.dateStart[0].concat(a.dateStart[1]));var c=b(this),e=(new Date(a.dateEnd[2],a.dateEnd[0]-1,a.dateEnd[1],a.dateEnd[3],a.dateEnd[4],a.dateEnd[5])).getTime()/1E3,k=null!=a.dateStart? (new Date(a.dateStart[2],a.dateStart[0]-1,a.dateStart[1],a.dateStart[3],a.dateStart[4],a.dateStart[5])).getTime()/1E3:null,s=(new Date).getTime()/1E3,d,f,l,m,n;c.bind("configure",function(g,h){var f=(new Date).getTime()/1E3;h&&b.extend(!0,a,h);"string"==typeof a.dateEnd&&(a.dateEnd=a.dateEnd.split(" "),a.dateEnd[0]=a.dateEnd[0].split("/"),a.dateEnd[1]=a.dateEnd[1].split(":"),a.dateEnd=a.dateEnd[0].concat(a.dateEnd[1]));null!=a.dateStart&&"string"==typeof a.dateStart&&(a.dateStart=a.dateStart.split(" "), a.dateStart[0]=a.dateStart[0].split("/"),a.dateStart[1]=a.dateStart[1].split(":"),a.dateStart=a.dateStart[0].concat(a.dateStart[1]));e=(new Date(a.dateEnd[2],a.dateEnd[0]-1,a.dateEnd[1],a.dateEnd[3],a.dateEnd[4],a.dateEnd[5])).getTime()/1E3;k=null!=a.dateStart?(new Date(a.dateStart[2],a.dateStart[0]-1,a.dateStart[1],a.dateStart[3],a.dateStart[4],a.dateStart[5])).getTime()/1E3:null;!0==a.timezone&&null!=h.offset&&(a.offset=36E5*parseInt(a.offset)+6E4*(new Date).getTimezoneOffset());"undefined"!=typeof h.option&& "undefined"==typeof h.option.global&&(h.option.global={});a.option.day=b.extend(!0,{},a.option.global,a.option.day);a.option.hour=b.extend(!0,{},a.option.global,a.option.hour);a.option.minute=b.extend(!0,{},a.option.global,a.option.minute);a.option.second=b.extend(!0,{},a.option.global,a.option.second);"knob"==a.skin.toLowerCase()&&p()||"knob"!=a.skin.toLowerCase()||p()||(a.skin=a.fallbackSkin);a.option.day.eClass=a.option.day.eClass.substring(1).split(".").join(" ");a.option.hour.eClass=a.option.hour.eClass.substring(1).split(".").join(" "); a.option.minute.eClass=a.option.minute.eClass.substring(1).split(".").join(" ");a.option.second.eClass=a.option.second.eClass.substring(1).split(".").join(" ");c.children().remove();q();"undefined"!=typeof d&&null!=d&&clearInterval(d);e>f?d=setInterval(function(){r()},1E3):null!=a.callback&&a.callback.call(this)});c.bind("destroy",function(){clearInterval(d);c.remove()});isNaN(e)?(alert("Invalid or null dateEnd mm/dd/yyyy. Example: 12/25/2013 17:30:00"),c.append("Invalid or null dateEnd mm/dd/yyyy. Example: 12/25/2013 17:30:00")): "knob"!=a.skin||null!=k&&!isNaN(k)?k>(new Date).getTime()?(alert("Starting date is greater than the current date"),c.append("Starting date is greater than the current date")):(!0==a.timezone&&(a.offset=36E5*parseInt(a.offset)+6E4*(new Date).getTimezoneOffset()),"undefined"!=typeof g.option&&"undefined"==typeof g.option.global&&(g.option.global={}),a.option.day=b.extend(!0,{},a.option.global,a.option.day),a.option.hour=b.extend(!0,{},a.option.global,a.option.hour),a.option.minute=b.extend(!0,{},a.option.global, a.option.minute),a.option.second=b.extend(!0,{},a.option.global,a.option.second),q()):(alert("Invalid or null dateStart mm/dd/yyyy. Example: 12/25/2013 17:30:00"),c.append("Invalid or null dateStart mm/dd/yyyy. Example: 12/25/2013 17:30:00"));e>s?d=setInterval(function(){r()},1E3):null!=a.callback&&a.callback.call(this)}})(jQuery);